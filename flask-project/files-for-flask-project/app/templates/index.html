{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}
{% import "_macros.html" as macros %}

{% block navbar %}
    {{super()}}
{% endblock navbar%}



{% block content %}
{{super()}}
<h1>Welcome to Ragtime,
    {% if current_user.is_authenticated %}
        {{ current_user.username }}
    {%- else %}
        Anonymous
    {%- endif %}!
</h1>
<div class="page-header">
    {% if not known %}
    <p>Mucho gusto! (Nice to meet you!)</p>
    {% else %}
    <p>Enjoy your stay.</p>
    {% endif %}
</div>
    {{ wtf.quick_form(form) }}

{#<ul class="compositions">
    {% for composition in compositions %}
    <li class = "composition">
        <div class="profile-thumbnail">
            <a href="{{ url_for('main.user', username=composition.artist.username) }}">
                <img class="img-rounded profile-thumbnail" src="{{ composition.artist.unicornify(size=64) }}">
            </a>
        </div>
        <div class="composition-content">
            <div class="composition-date">{{ moment(composition.timestamp).fromNow() }}</div>
            <div class="composition-artist">
                <a href="{{ url_for('main.user', username=composition.artist.username) }}">
                    {{ composition.artist.username }}
                </a>
            </div>
            <div class="composition-release-type">
                {% if composition.release_type == 1 %}
                    Single
                {% elif composition.release_type == 2 %}
                    EP
                {% elif composition.release_type == 3 %}
                    Album
                {% endif %}
            </div>
            <div class="composition-title">
                <a href='{{ url_for("main.composition", slug=composition.slug) }}'>{{ composition.title }}</a>
            </div>
            <div class="composition-description">
                {% if composition.description_html %}
                {{ composition.description_html | safe }}
                {% else %}
                {{ composition.description }}
                {% endif %}
            </div>
        </div>
    </li>
    {% endfor %}
</ul>#}

<div class="composition-tabs">
    <ul class="nav nav-tabs">
        <li {% if not show_followed %} class="active"{% endif %}>
            <a href="{{ url_for('.show_all') }}">All</a>
        </li>
        {% if current_user.is_authenticated %}
        <li {% if show_followed %} class="active"{% endif %}>
            <a href="{{ url_for('.show_followed') }}">Followers</a>
        </li>
        {% endif %}
    </ul>
    {% include '_compositions.html' %}
</div>


{% if pagination %}
<div class="pagination">
    {{ macros.pagination_widget(pagination, '.index') }}
</div>


{% endif %}
{% endblock content %}
